# Системы сборки

В простейшем случае мы можем использовать поставляемую в комплекте Java/Kotlin SDK утилиту javac/kotlinc:

```ps
kotlinc hello.kt -include-runtime -d hello.jar
java -jar hello.jar 
```

Однако очень быстро такой подход перестает работать. Как только в вашем приложении появляются десятки и сотни классов и множество внешних зависимостей, сборка вручную начинает занимать слишком много времени.

Тут-то и появляются системы сборки, автоматизирующие этот процесс. Теперь все что вам надо сделать - это в некотором формате описать структуру вашего приложения. Что вот тут лежат исходные коды, тут - ресурсы, собрать это все надо в архив такого формата, подключив такие зависимости. Дальше вы запускаете систему сборки, передав ей ваш файл с описанием структуры, и остальное она делает сама:

1. Найдет ваши .java файлы
2. Скачает необходимые библиотеки
3. Все это передаст компилятору javac
4. Результат упакует как надо в .jar архив или иной формат
5. Опционально - прогонит тесты, загрузит результат сборки куда-нибудь по сети и т.д.

Особенно важной фичей является управление зависимостями. При ручной сборке вам бы пришлось скачивать .jar файл вашей библиотеки, класть его в какую-нибудь папочку, затем при каждой сборке добавлять его к командной строке компилятора. При этом сразу встает куча вопросов: где взять этот файл, какой версии, как его обновлять, где его хранить.

Современные системы сборки решают эти вопросы. Существуют онлайн-репозитории, в которые уже выложено много различных библиотек (Maven Central), также можно подключить свои собственные репозитории (Nexus, Artifactory) или даже добавлять локальные репозитории. Все что вам нужно - найти репозиторий, в котором есть нужная вам библиотека, затем в своем скрипте сборки указать ее название и версию. И все. Дальше система сборки сама сходит в интернет, найдет в репозитории нужный .jar файл, скачает и подключит к проекту.

## Ant (Apache Ant)

Самая старая из ныне живущих систем. Структура проекта задается в XML. Изначально был исключительно инструментом автоматизации сборки и не имел встроенного менеджера зависимостей, позднее к нему для этого прикрутили Apache Ivy ...но его время уже ушло.

## Maven (Apache Maven)

Эта система сборки оказалась такой удачной, что жива до сих пор. Именно под нее были созданы большинство онлайн репозиториев с библиотеками, и другие системы сборки используют эту инфраструктуру. Структура проекта так же задается в виде XML, с именем pom.xml.

## Gradle

Наиболее актуальная на данный момент система сборки, все новые проекты рекомендуется делать именно на ней (но в реальной работе Maven кажется все еще встречается более часто). В отличие от Ant и Maven, для описания проекта она использует не XML, а скрипты на Groovy/Kotlin. Так что если вам нужна сложная логика сборки - прямо в сборочном скрипте вы можете писать классы, методы и любую логику, которая потребуется. Из Gradle вы можете легко использовать инфраструктуру репозиториев Maven и иметь доступ ко всем выложенным там библиотекам.

## Что почитать

* https://www.baeldung.com/ant-maven-gradle (небольшое сравнение)
* https://habr.com/ru/articles/458046/ (подробнее про градл)